#+TITLE: 202307 | å¼‚æ­¥ç¼ºå¸­ 0.11
#+DATE: 2023-08-07T20:05:29+0800
#+LASTMOD: 2023-08-08T20:47:03+0800
* é‡å¤§äº‹ä»¶
Andrewk åœ¨æœ€æ–°çš„æ–‡ç« 
[[https://ziglang.org/news/0.11.0-postponed-again/][The Upcoming Release Postponed Two More Weeks and Lacks Async Functions]] ä¸­æŒ‡å‡ºï¼Œå³å°†å‘å¸ƒçš„ 0.11 ä¸­å°†ä¸ä¼šåŒ…å«å¯¹å¼‚æ­¥çš„æ”¯æŒï¼Œç°åœ¨å¼‚æ­¥å®åœ¨ [[https://github.com/ziglang/zig/tree/stage2-async][stage2-async]] è¿™ä¸ªåˆ†æ”¯ä¸Šæ¥å¼€å‘ï¼Œä½†æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯æœ‰å…¶ä»–äº‹æƒ…å‡ºç°ï¼Œç„¶å Andrewk å°±å…ˆå»æè¿™äº›äº‹æƒ…äº†ã€‚å› æ­¤ï¼ŒæŠŠå¯¹å¼‚æ­¥çš„æ”¯æŒæ”¾åˆ° 0.12 ä¸Šäº†ã€‚
* è§‚ç‚¹/æ•™ç¨‹
- [[https://tigerbeetle.com/blog/2023-07-26-copy-hunting/][Copy Hunting | TigerBeetle]] :: æ¯”è¾ƒæœ‰æ„æ€çš„æ–‡ç« ï¼Œé€šè¿‡åˆ†æ LLVM çš„ IRï¼Œæ¥é¿å…ç¨‹åºä¸­ä¸å¿…è¦çš„ memcpy ä»¥åŠå¦‚ä½•å‡å°‘ binary ä½“ç§¯
- [[https://double-trouble.dev/post/zbench/][Taking off with Zig: Putting the Z in Benchmark]] :: Zig å…¥é—¨æ–‡ç« ï¼Œä½œè€…ä½¿ç”¨ Zig æ¥å®ç°äº†ä¸€ä¸ª benchmark åº“ï¼Œé‡Œé¢æœ‰ä½œè€…çš„æ„Ÿå—ï¼Œè¯­è¨€å°å·§ï¼Œä¸»è¦çš„è¯­è¨€ç‰¹ç‚¹ï¼šç‹¬ç‰¹çš„é”™è¯¯å¤„ç†ã€æ˜¾å¼çš„å†…å­˜æ§åˆ¶ã€comptime æ‰§è¡Œ
- [[https://hackernoon.com/the-new-wave-of-programming-languages-exploring-the-hidden-gems][The New Wave of Programming Languages: Pony, Zig, Crystal, Vlang, and Julia]] :: å¤šç§è¯­è¨€çš„å¯¹æ¯”ï¼ŒZig éƒ¨åˆ†çš„å¯¹æ¯”ï¼š

| Pros                                       | Cons                        |
|--------------------------------------------+-----------------------------|
| Excellent low-level control over code      | Relatively new and evolving |
| Emphasis on safety and reliability         | Limited library support     |
| Good interoperability with other languages | Steep learning curve        |

- [[https://www.aolium.com/karlseguin/cf03dee6-90e1-85ac-8442-cf9e6c11602a][Parsing timestamps and generating RFC3339 dates in Zig]] :: Zig æ ‡å‡†åº“é‡Œæœ‰è¿”å› unixtime æ—¶é—´æˆ³çš„å‡½æ•°ï¼Œä½†æ˜¯æ²¡æœ‰æ ¼å¼åŒ–å‡½æ•°ï¼Œä½œè€…è¿™é‡Œç»™å‡ºäº†ä¸€ç§å®ç°ï¼š
  #+begin_src zig
pub const DateTime = struct {
    year: u16,
    month: u8,
    day: u8,
    hour: u8,
    minute: u8,
    second: u8,
};

pub fn fromTimestamp(ts: u64) DateTime {
    const SECONDS_PER_DAY = 86400;
    const DAYS_PER_YEAR = 365;
    const DAYS_IN_4YEARS = 1461;
    const DAYS_IN_100YEARS = 36524;
    const DAYS_IN_400YEARS = 146097;
    const DAYS_BEFORE_EPOCH = 719468;

    const seconds_since_midnight: u64 = @rem(ts, SECONDS_PER_DAY);
    var day_n: u64 = DAYS_BEFORE_EPOCH + ts / SECONDS_PER_DAY;
    var temp: u64 = 0;

    temp = 4 * (day_n + DAYS_IN_100YEARS + 1) / DAYS_IN_400YEARS - 1;
    var year: u16 = @intCast(100 * temp);
    day_n -= DAYS_IN_100YEARS * temp + temp / 4;

    temp = 4 * (day_n + DAYS_PER_YEAR + 1) / DAYS_IN_4YEARS - 1;
    year += @intCast(temp);
    day_n -= DAYS_PER_YEAR * temp + temp / 4;

    var month: u8 = @intCast((5 * day_n + 2) / 153);
    const day: u8 = @intCast(day_n - (@as(u64, @intCast(month)) * 153 + 2) / 5 + 1);

    month += 3;
    if (month > 12) {
        month -= 12;
        year += 1;
    }

    return DateTime{
        .year = year,
        .month = month,
        .day = day,
        .hour = @intCast(seconds_since_midnight / 3600),
        .minute = @intCast(seconds_since_midnight % 3600 / 60),
        .second = @intCast(seconds_since_midnight % 60)
    };
}
  #+end_src
- [[https://www.aolium.com/karlseguin/cf03dee6-90e1-85ac-8442-cf9e6c11602a][Parsing timestamps and generating RFC3339 dates in Zig]] :: Zig æ ‡å‡†åº“é‡Œæœ‰è¿”å›
- [[https://www.aolium.com/karlseguin/46252c5b-587a-c419-be96-a0ccc2f11de4][Custom JSON serialization in Zig]] :: Zig é‡Œé¢è™½ç„¶æœ‰å¾ˆå¥½çš„ JSON åºåˆ—åŒ–æ”¯æŒï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰æŸä¸ªå­—æ®µçš„è§£æï¼Œä¸ Go =json.Marshaller= ç±»ä¼¼ï¼ŒZig ä¼šåœ¨åºåˆ—åŒ–æ—¶æŸ¥æ‰¾ç±»å‹çš„ =jsonStringify= å‡½æ•°ï¼Œé€šè¿‡å®ç°è¿™ä¸ªå‡½æ•°å°±å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œæ–‡ä¸­ç»™å‡ºäº†ä¸ªç¤ºä¾‹ï¼š
  #+begin_src zig
const NumericBoolean = struct {
    value: bool,

    pub fn jsonStringify(self: NumericBoolean, out: anytype) !void {
        const json = if (self.value) "1" else "0";
        return out.print("{s}", .{json});
    }
};
  #+end_src
- [[https://matklad.github.io/2023/07/16/three-different-cuts.html][Three Different Cuts]] :: matklad çš„æ–‡ç« ï¼Œä»‹ç»äº† Rustã€Goã€Zig ä¸‰ç§è¯­è¨€çš„ Cut å®ç°
- [[https://blog.orhun.dev/zig-bits-04/][Zig Bits 0x4: Building an HTTP client/server from scratch]] :: ä»‹ç»äº† std.http è¿™ä¸ªæ¨¡å—çš„ä½¿ç”¨
- [[https://tigerbeetle.com/blog/2023-07-11-we-put-a-distributed-database-in-the-browser/][We Put a Distributed Database In the Browser â€“ And Made a Game of It]] :: TigerBeetle çš„æ–°èŠ±æ ·ï¼ŒæŠŠæ•°æ®åº“æ¬åˆ°äº† Web ä¸Šã€‚[[https://news.ycombinator.com/item?id=36680535][HN è®¨è®º]]
- [[https://zig.news/gwenzek/zig-great-design-for-great-optimizations-638][Zig: great design for great optimizations]] :: æ¯”è¾ƒæœ‰æ„æ€çš„æ–‡ç« ï¼Œä½œè€…æ¯”è¾ƒäº† Clangã€Zig å¯¹ç›¸åŒé€»è¾‘ä»£ç ç”Ÿäº§çš„ LLVM IRï¼ŒZig ç”Ÿæˆçš„ IR æ›´åŠ ç²¾ç®€

* é¡¹ç›®/å·¥å…·
- [[https://blog.turso.tech/zig-helped-us-move-data-to-the-edge-here-are-our-impressions-67d3a9c45af4][Zig helped us move data to the Edge. Here are our impressions]] :: [[https://turso.tech/][Turso]] å…¬å¸çš„å®˜åšï¼Œå®ƒä»¬å…¬å¸çš„äº§å“æ—¶è¾¹ç¼˜æ•°æ®åº“ï¼Œè‡ªåŠ¨åŒæ­¥ PG çš„è¡¨åˆ° Edge ç«¯ï¼Œå‡å°‘è®¿é—®çš„æ—¶å»¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œä»–ä»¬ä»‹ç»äº†ä½¿ç”¨ Zig ç¼–å†™ PostgreSQL æ’ä»¶çš„ç»å†ï¼Œå¾—ç›Šäº =translate-c= ï¼Œä»–ä»¬å¯ä»¥ç›´æ¥ä»å·²æœ‰çš„ C ä»£ç å¼€å§‹æ„å»ºä»–ä»¬çš„äº§å“ã€‚æ’ä»¶åœ°å€ï¼š[[https://github.com/turso-extended/pg_turso][pg_turso]]
- [[https://github.com/tensorush/meduza][tensorush/meduza]] :: ğŸ¦ ğŸ§œâ€â™€ï¸ Zig codebase graph generator that emits a Mermaid class diagram
- [[https://github.com/AndreaOrru/zen][AndreaOrru/zen]] :: Experimental operating system written in Zig
- [[https://github.com/EugenHotaj/zig_gpt2][EugenHotaj/zig_gpt2]] :: GPT-2 inference engine written in Zig

* [[https://github.com/ziglang/zig/pulls?page=1&q=+is%3Aclosed+is%3Apr+closed%3A2023-06-01..2023-07-01][Zig è¯­è¨€æ›´æ–°]]
